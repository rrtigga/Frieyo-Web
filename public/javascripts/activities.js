var items = [
   {
      "id": 1,
      "topicName": "Tech",
      "imageURL":"../images/start/topics/tech.jpeg"
   },
   {
      "id": 2,
      "topicName": "Design",
      "imageURL":"../images/start/topics/design.jpeg"
   },
   {
      "id": 3,
      "topicName": "Art",
      "imageURL":"../images/start/topics/art.jpeg"
   },
   {
      "id": 4,
      "topicName": "Fashion",
      "imageURL":"../images/start/topics/fashion.jpeg"
   },
   {
      "id": 5,
      "topicName": "Culture",
      "imageURL":"../images/start/topics/culture.jpeg"
   },
   {
      "id": 6,
      "topicName": "Photography",
      "imageURL":"../images/start/topics/photography.jpg"
   },
   {
      "id": 7,
      "topicName": "Movies",
      "imageURL":"../images/start/topics/movies.jpeg"
   },
   {
      "id": 8,
      "topicName": "Sports",
      "imageURL":"../images/start/topics/sports.jpeg"
   },
   {
      "id": 9,
      "topicName": "Entrepreneurship",
      "imageURL":"../images/start/topics/tech.jpeg"
   },
   {
      "id": 10,
      "topicName": "Gaming",
      "imageURL":"../images/start/topics/gaming.jpg"
   },
   {
      "id": 11,
      "topicName": "Startups",
      "imageURL":"../images/start/topics/startups.jpeg"
   },
   {
      "id": 12,
      "topicName": "Politics",
      "imageURL":"../images/start/topics/politics.jpg"
   },
   {
      "id": 13,
      "topicName": "Religion",
      "imageURL":"../images/start/topics/religion.jpeg"
   },
   {
      "id": 14,
      "topicName": "Travel",
      "imageURL":"../images/start/topics/travel.jpeg"
   },
   {
      "id": 15,
      "topicName": "Cooking",
      "imageURL":"../images/start/topics/cooking.jpg"
   },
   {
      "id": 16,
      "topicName": "Anime",
      "imageURL":"../images/start/topics/anime.jpeg"
   },
   {
      "id": 17,
      "topicName": "Philantrophy",
      "imageURL":"../images/start/topics/philantrophy.jpeg"
   },
   {
      "id": 18,
      "topicName": "Environment",
      "imageURL":"../images/start/topics/environment.jpeg"
   },
   {
      "id": 20,
      "topicName": "Vegan",
      "imageURL":"../images/start/topics/vegan.jpg"
   },
   {
      "id": 21,
      "topicName": "Health",
      "imageURL":"../images/start/topics/health.jpeg"
   },
   {
      "id": 23,
      "topicName": "Socializing",
      "imageURL":"../images/start/topics/socializing.jpeg"
   },
   {
      "id": 24,
      "topicName": "Party",
      "imageURL":"../images/start/topics/party.jpeg"
   },
   {
      "id": 25,
      "topicName": "Marketing",
      "imageURL":"../images/start/topics/marketing.jpeg"
   },
   {
      "id": 26,
      "topicName": "Business",
      "imageURL":"../images/start/topics/business.jpeg"
   },
   {
      "id": 27,
      "topicName": "Finance",
      "imageURL":"../images/start/topics/finance.jpeg"
   },
   {
      "id": 28,
      "topicName": "Science",
      "imageURL":"../images/start/topics/science.jpeg"
   },
   {
      "id": 29,
      "topicName": "Bowling",
      "imageURL":"../images/start/topics/bowling.jpeg"
   },
   {
      "id": 30,
      "topicName": "Golf",
      "imageURL":"../images/start/topics/golf.jpeg"
   },
   {
      "id": 31,
      "topicName": "Hockey",
      "imageURL":"../images/start/topics/hockey.jpg"
   },
   {
      "id": 32,
      "topicName": "Yoga",
      "imageURL":"../images/start/topics/yoga.jpeg"
   },
   {
      "id": 33,
      "topicName": "Boxing",
      "imageURL":"../images/start/topics/boxing.jpg"
   },
   {
      "id": 34,
      "topicName": "Basketball",
      "imageURL":"../images/start/topics/basketball.jpeg"
   },
   {
      "id": 35,
      "topicName": "Football",
      "imageURL":"../images/start/topics/football.jpeg"
   },
   ,
   {
      "id": 36,
      "topicName": "Tennis",
      "imageURL":"../images/start/topics/tennis.jpg"
   },
   {
      "id": 37,
      "topicName": "Soccer",
      "imageURL":"../images/start/topics/soccer.jpg"
   },
   {
      "id": 38,
      "topicName": "Weight Lifting",
      "imageURL":"../images/start/topics/weight-lifting.jpeg"
   },
   {
      "id": 39,
      "topicName": "Dance",
      "imageURL":"../images/start/topics/dance.jpeg"
   },
   {
      "id": 40,
      "topicName": "Exercise",
      "imageURL":"../images/start/topics/exercise.jpeg"
   },
   {
      "id": 41,
      "topicName": "Music",
      "imageURL":"../images/start/topics/music.jpg"
   },
   {
      "id": 42,
      "topicName": "Singing",
      "imageURL":"../images/start/topics/singing.jpeg"
   },
   {
      "id": 43,
      "topicName": "Rapping",
      "imageURL":"../images/start/topics/rapping.jpg"
   },
   {
      "id": 44,
      "topicName": "Hip-Hop",
      "imageURL":"../images/start/topics/hip-hop.jpeg"
   },
   {
      "id": 45,
      "topicName": "Pop",
      "imageURL":"../images/start/topics/pop.jpg"
   },
   {
      "id": 46,
      "topicName": "EDM",
      "imageURL":"../images/start/topics/edm.jpg"
   },
   {
      "id": 47,
      "topicName": "Education",
      "imageURL":"../images/start/topics/education.jpeg"
   },
   {
      "id": 48,
      "topicName": "Writing",
      "imageURL":"../images/start/topics/writing.jpeg"
   },
   {
      "id": 49,
      "topicName": "Journalism",
      "imageURL":"../images/start/topics/journalism.jpeg"
   },
   {
      "id": 50,
      "topicName": "Theatre",
      "imageURL":"../images/start/topics/theatre.jpeg"
   },
   {
      "id": 51,
      "topicName": "Poetry",
      "imageURL":"../images/start/topics/poetry.jpg"
   },
   {
      "id": 52,
      "topicName": "Comedy",
      "imageURL":"../images/start/topics/comedy.jpg"
   },
   {
      "id": 53,
      "topicName": "Reading",
      "imageURL":"../images/start/topics/reading.jpeg"
   },
   {
      "id": 54,
      "topicName": "Fiction",
      "imageURL":"../images/start/topics/fiction.jpeg"
   },
   {
      "id": 55,
      "topicName": "Diversity",
      "imageURL":"../images/start/topics/diversity.jpg"
   },
   {
      "id": 56,
      "topicName": "LGBT",
      "imageURL":"../images/start/topics/lgbt.jpg"
   },
   {
      "id": 58,
      "topicName": "BlackLivesMatter",
      "imageURL":"../images/start/topics/blacklivesmatter.jpg"
   },
   {
      "id": 59,
      "topicName": "Women In Tech",
      "imageURL":"../images/start/topics/womenintech.jpg"
   },
   {
      "id": 60,
      "topicName": "Mental Health",
      "imageURL":"../images/start/topics/mentalhealth.jpg"
   }
];



console.log(localStorage.getItem('userID') +" <----userID here");
//so I have the userID

//use the userID to access the user in Firebase you want to store the array of selectedActivities inside

//store the window.newActiveItems under the key "selectedActivities"



/*React Code Below */


var RepeatModuleIndex = React.createClass({
	getInitialState: function () {
		return { allItems:[], activeItems: [] }
	},
	componentDidMount: function() {
		this.setState({allItems:items});
	},

	handleClick: function (event, item) {
		event.preventDefault();
		window.newActiveItems = this.state.activeItems.slice();
		var index = window.newActiveItems.indexOf(item);
		if(index !== -1){
         //check if array is empty, if so set display:none to the topic-bar
			window.newActiveItems.splice(index, 1);
		}
		else {
         //check if array has more than 3 items
         //if more than 3 items, then take away display:none from the topic bar
			window.newActiveItems.push(item);
		}
		console.log(window.newActiveItems);
		this.setState({ activeItems: window.newActiveItems});

	}, 
	render: function() {
		var repeatModules = this.state.allItems.map(function(item){
			var active = this.state.activeItems.some(function(activeItem){
				return item.topicName === activeItem;
			});

			return <RepeatModule key={item.id} handleClick={this.handleClick} active={active} item={item} />;
		}.bind(this));
		return (
			<div className="row flex-center">
				{repeatModules}
			</div>
		);
	}
});

var RepeatModule = React.createClass({
	moduleItemClick: function (e) {
		this.props.handleClick(e, this.props.item.topicName);
	},
	render:function(){
		return (
      <div className="column _20">
			<div 
   			onClick={this.moduleItemClick}
   			className={`topicContainer ${this.props.active ? 'purpleOverlay' : '' }`} 
   			data-value={this.props.item.topicName}>
   			<h3>{this.props.item.topicName}</h3>,
   			<img className="full-height-image" src={this.props.item.imageURL}/>
            <img className={`check ${this.props.active ? 'not-none' : 'none'}`} src="../images/start/Check.png"/>
			</div>
      </div>
		);
	}
});

ReactDOM.render(<RepeatModuleIndex/>,     
     document.getElementById('topics'));




